<html lang="en">
<head>
	<title>Pentagon</title>
	<!-- <link rel="shortcut icon" href="iconCoC.png">   -->
	<style>
		body {
		background-color: #000000;
		margin: 0px;
		overflow: hidden;
		}
	</style>
</head>
<script src="https://ajax.googleapis.com/ajax/libs/threejs/r69/three.js"></script>	
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script>
<link rel="stylesheet" href="jquery-ui/TechGreen.css">
<!-- <script src="three.min.js"></script> -->
<body oncontextmenu="return false;" onselectstart="return false;">
<script>
	var LL={}
	var camera, scene, renderer;
	var windowX = window.innerWidth
	   ,windowY = window.innerHeight;
	var radius=25,thita=0,phai=-Math.PI/2;
	// init(); to the end 
	function init() {
		camera = new THREE.PerspectiveCamera(40,windowX/windowY,5,10000);
		scene = new THREE.Scene();
		renderer = new THREE.WebGLRenderer( { antialias: true } );
		renderer.setSize( windowX, windowY );
		renderer.setClearColor ('#000000')
		document.body.appendChild( renderer.domElement );

		// setAuxPlane(-1,1,-1,1)
		// scene.add(auxPlane)
		var arrow
		var origin =new THREE.Vector3(0,0,0) 
		   ,xAxis =new THREE.Vector3(10,0,0)
		   ,yAxis =new THREE.Vector3(0,10,0)
		   ,zAxis =new THREE.Vector3(0,0,10);    
		arrow=LL.Arrow(xAxis.clone().negate(),xAxis.multiplyScalar(2),0xffff00,2) // 
		scene.add(arrow)
		arrow=LL.Arrow(yAxis.clone().negate(),yAxis.multiplyScalar(2),0x00ffff,2)
		scene.add(arrow)
		arrow=LL.Arrow(zAxis.clone().negate(),zAxis.multiplyScalar(2),0xff00ff,2)
		scene.add(arrow)


		var geometry = new THREE.PlaneGeometry(10,10,2,2);
		var texture=THREE.ImageUtils.loadTexture("images/TEC-example.jpg")
		var material = new THREE.MeshBasicMaterial({opacity:0.2,transparent:false,side:THREE.DoubleSide/*,wireframe:true*/,map:texture} );
		console.log(THREE.ImageUtils.loadTexture("images/TEC-example.jpg"))
		var face=[]
		face[1]= new THREE.Mesh( geometry, material );
		face[1].position.set(0,0,10)
		face[1].lookAt(face[1].position.clone().multiplyScalar(1))
		scene.add(face[1]);
		face[2]= new THREE.Mesh( geometry, material );
		face[2].position.set(10,0,0)
		face[2].lookAt(face[2].position.clone().multiplyScalar(2))
		scene.add(face[2]);




		renderer.domElement.addEventListener('mousemove', mousemoveReact);

		setInterval('render()',60)
		//setInterval('flash()',10)
	}

	function render(){
		var origin= new THREE.Vector3(0,0,0) 
		camera.position.x=origin.x+radius*Math.cos(phai)*Math.cos(thita)
		camera.position.z=origin.z+radius*Math.sin(phai)*Math.cos(thita)
		camera.position.y=origin.y+radius*Math.sin(thita)		
		camera.lookAt(origin);
		renderer.render( scene, camera );
	}

	LL.Arrow=function(origin,vector,color,head){
		var geometry,material
		var arrow,end,length,twig1,twig2,twig3
		var zz,perpen1,perpen2
		var s3d2=Math.sqrt(3)/2
		length=vector.length()
		zz=new THREE.Vector3(0,0,1)

		if(head==null){head=length*.3}
		if(vector.clone().normalize().equals(zz) ||
		   vector.clone().normalize().negate().equals(zz)){
			perpen1=new THREE.Vector3(1,0,0)
			perpen2=new THREE.Vector3(0,1,0)
		}else{
			perpen1=zz.clone().cross(vector).normalize()
			perpen2=vector.clone().cross(perpen1).normalize()
		}
		end=origin.clone().add(vector)
		twig1=origin.clone()
		 	 .add(vector.clone().setLength(length-head))
		 	 .add(perpen1.clone().setLength(.5*head/3.))
		twig2=origin.clone()
			 .add(vector.clone().setLength(length-head))
			 .add(perpen1.clone().setLength(-.25*head/3.)) 
			 .add(perpen2.clone().setLength(.5*s3d2*head/3.)) 
		twig3=origin.clone()
			 .add(vector.clone().setLength(length-head))
			 .add(perpen1.clone().setLength(-.25*head/3.)) 
			 .add(perpen2.clone().setLength(-.5*s3d2*head/3.)) 

		geometry=new THREE.Geometry();
		geometry.vertices.push(origin);
		geometry.vertices.push(end);
		geometry.vertices.push(twig1);
		geometry.vertices.push(end);
		geometry.vertices.push(twig2);
		geometry.vertices.push(end);
		geometry.vertices.push(twig3);
		material=new THREE.LineBasicMaterial({
			color:color,
		})
		arrow=new THREE.Line(geometry,material)
		return arrow
	}

	function mousemoveReact(event){
		if(event.which==1){
			renderer.domElement.style.cursor = "none"
			x0=event.movementX || event.mozMovementX || event.webkitMovementX || 0;
			y0=event.movementY || event.mozMovementY || event.webkitMovementY || 0;
			phai+=x0*0.002
			thita+=y0*0.002
			if(thita>Math.PI*0.49){thita=Math.PI*0.49}
			if(thita<-Math.PI*0.49){thita=-Math.PI*0.49}
		}else{   
			renderer.domElement.style.cursor = "crosshair"
		}
	}

	init();
</script>
</body>
</html>
